<head>
    <title>Cothink</title>
</head>

<body>
    <div class="items-container">
        <header>
        <h1>CoThink</h1>
            {{> loginButtons}}
            {{#if currentUser}}
                <form class="new-item">
                    <input type="text" name="text" placeholder="Type to add new items" />
                </form>
            {{/if}}
        </header>

        <div>
            <ul>
                {{#each items}}
                    <li>
                        {{#linkTo route='item'}}
                            - {{this.title}} -
                        {{/linkTo}}
                    </li>
                {{/each}}
            </ul>
        </div>
    </div>
</body>

<template name="item">
    <div class="item" id="{{_id}}">
        <div class="item-header">
            {{> itemtitle}}
            <button class="hide">&times;</button>
            <button class="delete">d</button>
            <em class="item-author">{{username}}</em>
        </div>
        <br>
        {{> itemtext}}
    </div>
</template>

<template name="itemtitle">
    <div class="item-title editable-container {{#if editingMode}}editing-mode{{/if}}">
        <input class="editable-editor" type="text" size="5" />
        <div class="editable-display">{{{title}}}</div>
    </div>
</template>

<template name="itemtext">
    <div class="item-text editable-container {{#if editingMode}}editing-mode{{/if}}">
        <div class="editable-display">{{{text}}}</div>
        <textarea class="editable-editor" rows="10"></textarea><!-- TODO: automatic textarea expansion (or back to editable div) -->
    </div>
</template>

<!-- Empty template to use as loading template, to get rid of default "Loading..." message that for some reason never disappears. -->
<template name="empty"></template>
